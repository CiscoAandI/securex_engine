{
    "workflow": {
        "unique_name": "definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK",
        "name": "Service Now - Send Info (Alpha)",
        "title": "Service Now - Send Info (Alpha)",
        "type": "generic.workflow",
        "base_type": "workflow",
        "variables": [
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "input",
                    "name": "severity",
                    "type": "datatype.string",
                    "description": "Critical\nMajor\nMinor\nWarning \nError\nInfo\nclear\n\n(Info and warning will be ignored and ticket will be not created)",
                    "is_required": true,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PCTJ6L1689Q5nhfd4h497cy9ws6Kj087w",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "input",
                    "name": "ci_node",
                    "type": "datatype.string",
                    "description": "Identifier of the host that the event triggered for. Example IP, Host name, Mac address, serial number or sys_id(cmdb_ci) value\n\nMaximum: 256 Characters",
                    "is_required": true,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PCTH090ZBVT42lEI7SuHUZuazeSLsyBgE",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "input",
                    "name": "incident_ticket",
                    "type": "datatype.string",
                    "description": "External system can send incident ticket number to which event has to be merged",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PCTJV41B2MI2leDH6r4DRcoAie6v8D8nD",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "input",
                    "name": "event_additional_info",
                    "type": "datatype.string",
                    "description": "Pass as much information in to this field.\n\nMaximum: 10,000 Characters",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PCTJJ4SQXWR2CbVbg9C73FFHAhULCJubd",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "input",
                    "name": "ci_node_identifier_type",
                    "type": "datatype.string",
                    "description": "Possible Values are , If “Null” assume default as CI name\n\nCI Name\nFQDN\nIP Address\nMac Address\nSerial Number\nSN CI SysID\nIP Address",
                    "is_required": true,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PCTH7RVLPP80PVI49PQVHI7YRXypAYPBG",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "input",
                    "name": "event_type",
                    "type": "datatype.string",
                    "description": "Stateful or Stateless (Default value is stateless). If “Null” set default as Stateless",
                    "is_required": true,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PCTIYVZS6VU5hAUDnKzZzo1p1Nacsox1R",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "input",
                    "name": "event_origin_id",
                    "type": "datatype.string",
                    "description": "Event id from the origin system\n\nMaximum: 50 Characters",
                    "is_required": true,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PCTIK6REJJ71v0OeeZmKax5aPrXe1ZQcJ",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "input",
                    "name": "event_message_short",
                    "type": "datatype.string",
                    "description": "This value goes to Incident 'Short Description'\n\nMaximum: 256 Characters",
                    "is_required": true,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PCTHQE0XKFQ5JF2uuEP1Oh1hT8IZdIZSt",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "input",
                    "name": "event_source",
                    "type": "datatype.string",
                    "description": "The name of the event source. Example Splunk (Splunk, Meraki, EM7, DNAC)",
                    "is_required": true,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PCTISLG030F1FgiGBtQ62a2t4RAWSt0ZP",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "input",
                    "name": "event_metric_name",
                    "type": "datatype.string",
                    "description": "Name of the metric that triggered the alert. Example CPU or Memory utilization reached threshold\n\nMaximum: 256 Characters",
                    "is_required": true,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PCTIATVH07P3CUjxwmxysoCYe1JeONTSV",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "input",
                    "name": "account",
                    "type": "datatype.string",
                    "description": "The Account ID for the Service Now customer",
                    "is_required": true,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PCTGKMFH3WV2Yv5NBVmEgwoGukGcqINWf",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "input",
                    "name": "event_time",
                    "type": "datatype.string",
                    "description": "Time when this event is created in Source system",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PCTK1M2B2S93uJNnp73k9cri5DFf4Px3K",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "input",
                    "name": "event_message",
                    "type": "datatype.string",
                    "description": "User friendly message that can be viewed from ticket description\n\nMaximum: 4000 Characters",
                    "is_required": true,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PCTHGT0Y17V3snr2uKyMYBQRBQ976Tpnx",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "response",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PCTQN4JJ8QC7NI2M9Bgyz4fr6wRUXxIZS",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "input",
                    "name": "event_last_detected",
                    "type": "datatype.string",
                    "description": "Time when this event last occurred",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PCTJPM4ZTEU1Q0IDZUoMOoIqrJ5NoWKfk",
                "object_type": "variable_workflow"
            }
        ],
        "properties": {
            "atomic": {
                "atomic_group": "Service Now",
                "is_atomic": true
            },
            "delete_workflow_instance": false,
            "display_name": "Service Now - Send Info (Alpha)",
            "runtime_user": {
                "target_default": true
            },
            "target": {
                "target_type": "web-service.endpoint",
                "target_id": "definition_target_01PCLP3FGEBW72knwPIh07vQXRXxc6uChfT",
                "execute_on_workflow_target": true
            }
        },
        "object_type": "definition_workflow",
        "actions": [
            {
                "unique_name": "definition_activity_01PQ238ESKC7U1w1lLNXygXBWOTUetdXAUz",
                "name": "Group",
                "title": "Escape Quotes and Newlines",
                "type": "logic.group",
                "base_type": "activity",
                "properties": {
                    "continue_on_failure": false,
                    "display_name": "Escape Quotes and Newlines",
                    "skip_execution": false
                },
                "object_type": "definition_activity",
                "actions": [
                    {
                        "unique_name": "definition_activity_01PR040S5HQEE0qcfLrpgg4EpLXMBe77jMG",
                        "name": "Group",
                        "title": "Escape Event Message",
                        "type": "logic.group",
                        "base_type": "activity",
                        "properties": {
                            "continue_on_failure": false,
                            "display_name": "Escape Event Message",
                            "skip_execution": false
                        },
                        "object_type": "definition_activity",
                        "actions": [
                            {
                                "unique_name": "definition_activity_01PQZX1FVAO4F6igZyZkIezMn4M9LT0nVRN",
                                "name": "Execute Python Script",
                                "title": "Escape Event Message",
                                "type": "python3.script",
                                "base_type": "activity",
                                "properties": {
                                    "action_timeout": 180,
                                    "continue_on_failure": false,
                                    "description": "Must use this for \\ns",
                                    "display_name": "Escape Event Message",
                                    "script": "import sys\nevent_message = sys.argv[1].replace(\"\\n\", \"\\\\n\")\nevent_message = event_message.replace(\"\\\"\", \"\\\\\\\"\") ",
                                    "script_arguments": [
                                        "$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTHGT0Y17V3snr2uKyMYBQRBQ976Tpnx$"
                                    ],
                                    "script_queries": [
                                        {
                                            "script_query": "event_message",
                                            "script_query_name": "event_message",
                                            "script_query_type": "string"
                                        }
                                    ],
                                    "skip_execution": false
                                },
                                "object_type": "definition_activity"
                            },
                            {
                                "unique_name": "definition_activity_01PQZXR4MT0OD2htsCbHBw651w4iPHAPbWX",
                                "name": "Set Variables",
                                "title": "Set Event Message",
                                "type": "core.set_multiple_variables",
                                "base_type": "activity",
                                "properties": {
                                    "continue_on_failure": false,
                                    "display_name": "Set Event Message",
                                    "skip_execution": false,
                                    "variables_to_update": [
                                        {
                                            "variable_to_update": "$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTHGT0Y17V3snr2uKyMYBQRBQ976Tpnx$",
                                            "variable_value_new": "$activity.definition_activity_01PQZX1FVAO4F6igZyZkIezMn4M9LT0nVRN.output.script_queries.event_message$"
                                        }
                                    ]
                                },
                                "object_type": "definition_activity"
                            }
                        ]
                    },
                    {
                        "unique_name": "definition_activity_01PR04VOYYI843l5PQsfyoImd0jJFBx628G",
                        "name": "Group",
                        "title": "Escape Event Message Short",
                        "type": "logic.group",
                        "base_type": "activity",
                        "properties": {
                            "continue_on_failure": false,
                            "display_name": "Escape Event Message Short",
                            "skip_execution": false
                        },
                        "object_type": "definition_activity",
                        "actions": [
                            {
                                "unique_name": "definition_activity_01PR062J4BXBS76JBa0h33PgXLUO0OuObwJ",
                                "name": "Execute Python Script",
                                "title": "Event Message Short",
                                "type": "python3.script",
                                "base_type": "activity",
                                "properties": {
                                    "action_timeout": 180,
                                    "continue_on_failure": false,
                                    "display_name": "Event Message Short",
                                    "script": "import sys\nevent_message_short = sys.argv[1].replace(\"\\n\", \"\\\\n\")\nevent_message_short = event_message_short.replace(\"\\\"\", \"\\\\\\\"\")",
                                    "script_arguments": [
                                        "$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTHQE0XKFQ5JF2uuEP1Oh1hT8IZdIZSt$"
                                    ],
                                    "script_queries": [
                                        {
                                            "script_query": "event_message_short",
                                            "script_query_name": "event_message_short",
                                            "script_query_type": "string"
                                        }
                                    ],
                                    "skip_execution": false
                                },
                                "object_type": "definition_activity"
                            },
                            {
                                "unique_name": "definition_activity_01PR0725561DG3TsPSwEzqel8rc70iqCorF",
                                "name": "Set Variables",
                                "title": "Set Event Message Short",
                                "type": "core.set_multiple_variables",
                                "base_type": "activity",
                                "properties": {
                                    "continue_on_failure": false,
                                    "display_name": "Set Event Message Short",
                                    "skip_execution": false,
                                    "variables_to_update": [
                                        {
                                            "variable_to_update": "$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTHQE0XKFQ5JF2uuEP1Oh1hT8IZdIZSt$",
                                            "variable_value_new": "$activity.definition_activity_01PR062J4BXBS76JBa0h33PgXLUO0OuObwJ.output.script_queries.event_message_short$"
                                        }
                                    ]
                                },
                                "object_type": "definition_activity"
                            }
                        ]
                    },
                    {
                        "unique_name": "definition_activity_01PQ262S6GYBD77jBrzQSTzSvxiduqsvYlu",
                        "name": "Replace String",
                        "title": "Escape CI Node",
                        "type": "core.replacestring",
                        "base_type": "activity",
                        "properties": {
                            "continue_on_failure": false,
                            "display_name": "Escape CI Node",
                            "input_string": "$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTH090ZBVT42lEI7SuHUZuazeSLsyBgE$",
                            "replace_list": [
                                {
                                    "replaced_string": "\"",
                                    "replacement_string": "\\\""
                                },
                                {
                                    "replaced_string": "\\n",
                                    "replacement_string": "\\\\n"
                                }
                            ],
                            "skip_execution": false
                        },
                        "object_type": "definition_activity"
                    }
                ]
            },
            {
                "unique_name": "definition_activity_01PCTE0GT73WK2lvVqmrNgr5292AVOkhm0x",
                "name": "HTTP Request",
                "title": "POST to Service Now (Alpha)",
                "type": "web-service.http_request",
                "base_type": "activity",
                "properties": {
                    "action_timeout": 180,
                    "allow_auto_redirect": true,
                    "body": "{\n  \"account\": \"$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTGKMFH3WV2Yv5NBVmEgwoGukGcqINWf$\",\n  \"ci_node\": \"$activity.definition_activity_01PQ262S6GYBD77jBrzQSTzSvxiduqsvYlu.output.result_string$\",\n  \"ci_node_identifier_type\": \"$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTH7RVLPP80PVI49PQVHI7YRXypAYPBG$\",\n  \"event_additional_info\": \"$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTJJ4SQXWR2CbVbg9C73FFHAhULCJubd$\",\n  \"event_last_detected\": \"$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTJPM4ZTEU1Q0IDZUoMOoIqrJ5NoWKfk$\",\n  \"event_message\": \"$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTHGT0Y17V3snr2uKyMYBQRBQ976Tpnx$\",\n  \"event_message_short\": \"$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTHQE0XKFQ5JF2uuEP1Oh1hT8IZdIZSt$\",\n  \"event_metric_name\": \"$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTIATVH07P3CUjxwmxysoCYe1JeONTSV$\",\n  \"event_origin_id\": \"$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTIK6REJJ71v0OeeZmKax5aPrXe1ZQcJ$\",\n  \"event_source\": \"$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTISLG030F1FgiGBtQ62a2t4RAWSt0ZP$\",\n  \"event_time\": \"$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTK1M2B2S93uJNnp73k9cri5DFf4Px3K$\",\n  \"event_type\": \"$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTIYVZS6VU5hAUDnKzZzo1p1Nacsox1R$\",\n  \"incident_ticket\": \"$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTJV41B2MI2leDH6r4DRcoAie6v8D8nD$\",\n  \"severity\": \"$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.input.variable_workflow_01PCTJ6L1689Q5nhfd4h497cy9ws6Kj087w$\"\n}",
                    "content_type": "application/json",
                    "continue_on_error_status_code": false,
                    "continue_on_failure": false,
                    "description": "Marked as alpha because requirements are not completed.\n\nTODO:\n1) Production or Sandbox Service Now?\n2) Service account?\n3) SysId for Unilever is only for production. What about development?\n4) Event Source needs to be set to thousand eyes in CMS.\n5) Ci_node_identifier_type not clearly defined.\n6) Determine a severity more detailed than simply \"Major\" for all flows",
                    "display_name": "POST to Service Now (Alpha)",
                    "method": "POST",
                    "relative_url": "/now/import/x_cims_cms_event_m_cms_actionable_events_staging",
                    "runtime_user": {
                        "target_default": true
                    },
                    "skip_execution": false,
                    "target": {
                        "use_workflow_target": true
                    }
                },
                "object_type": "definition_activity"
            },
            {
                "unique_name": "definition_activity_01PCTQPUW32IM3BTCbLInf986AQhNtvM9sI",
                "name": "Set Variables",
                "title": "Set Action Response to Api Response",
                "type": "core.set_multiple_variables",
                "base_type": "activity",
                "properties": {
                    "continue_on_failure": false,
                    "display_name": "Set Action Response to Api Response",
                    "skip_execution": false,
                    "variables_to_update": [
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PCTDQD9LFL10tNfjMknq1zKO1GBalXvNK.output.variable_workflow_01PCTQN4JJ8QC7NI2M9Bgyz4fr6wRUXxIZS$",
                            "variable_value_new": "$activity.definition_activity_01PCTE0GT73WK2lvVqmrNgr5292AVOkhm0x.output.response_body$"
                        }
                    ]
                },
                "object_type": "definition_activity"
            }
        ],
        "categories": [
            "category_01PCLWDGQUAHA52qFD6BtnQFGmUSWudUviu"
        ]
    },
    "categories": {
        "category_01PCLWDGQUAHA52qFD6BtnQFGmUSWudUviu": {
            "unique_name": "category_01PCLWDGQUAHA52qFD6BtnQFGmUSWudUviu",
            "name": "Service Now",
            "title": "Service Now",
            "type": "basic.category",
            "base_type": "category",
            "category_type": "custom",
            "object_type": "category"
        }
    },
    "targets": {
        "definition_target_01PCLP3FGEBW72knwPIh07vQXRXxc6uChfT": {
            "unique_name": "definition_target_01PCLP3FGEBW72knwPIh07vQXRXxc6uChfT",
            "name": "Service Now",
            "title": "Service Now",
            "type": "web-service.endpoint",
            "base_type": "target",
            "object_type": "definition_target",
            "properties": {
                "default_runtime_user_id": "definition_runtime_user_01PCLIKIUV8PP5jO3ccVGWyy4vADLPpRPsG",
                "disable_certificate_validation": true,
                "display_name": "Service Now",
                "host": "ciscodeliverysandbox.service-now.com",
                "ignore_proxy": false,
                "no_runtime_user": false,
                "path": "/api",
                "protocol": "https"
            }
        }
    },
    "runtime_users": {
        "definition_runtime_user_01PCLIKIUV8PP5jO3ccVGWyy4vADLPpRPsG": {
            "unique_name": "definition_runtime_user_01PCLIKIUV8PP5jO3ccVGWyy4vADLPpRPsG",
            "name": "Przemyslaw's Service Now Credentials",
            "title": "Przemyslaw's Service Now Credentials",
            "type": "runtime_user.web-service_basic_credentials",
            "base_type": "runtime_user",
            "object_type": "definition_runtime_user",
            "properties": {
                "auth_option": "*****",
                "basic_password": "*****",
                "basic_username": "*****",
                "display_name": "Przemyslaw's Service Now Credentials"
            }
        }
    }
}