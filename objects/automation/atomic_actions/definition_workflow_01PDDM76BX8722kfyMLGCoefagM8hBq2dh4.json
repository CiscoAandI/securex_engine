{
    "workflow": {
        "unique_name": "definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4",
        "name": "Thousand Eyes - Parse Event Data",
        "title": "Thousand Eyes - Parse Event Data",
        "type": "generic.workflow",
        "base_type": "workflow",
        "variables": [
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "ruleId",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PDDO9XIU8W669LA3U5C8tgTlQDwkUYv7W",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "eventId",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PDDR8CWL6JB1GPCiFT27OtfRQhK1MoxEg",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "firstMetricsAtStart",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PES2TGCH8GF1CWganVed9YkJPwsSMKNob",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "testTargetsDescription",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PEDJ4ZGG1QB31cHmTTmWaZvP6rCQNxJTS",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "agentList",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PDDNHYX9YKF1uXbBCGeoSdYs3KdYbBDxL",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "eventType",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PDDNQRY8KFJ5OD9gDT2qit6O7nNgsDvf8",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "firstAgentID",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PES34PQMFBY4r8XZ8UmCQqqmP0P3tKtE7",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "alertId",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PDDNCPD0SR74yI38VFFeYuS0GTg88lsmo",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "testId",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PDDNF531YNW4sk52BLwj3Af48CUnOWEcd",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "testLabelList",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PDDQVQJJDJQ3Hjs3ID5KWGWbiuzd2kNn7",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "firstAgentName",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PIBCW3BOO7128k1jPPpf8XCAU3sLtznvJ",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "ruleExpression",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PDDO2JHAKXC24j4G90qt9y3AnMz4bLPu8",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "permalink",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PDDNZMZEWB85Izw2pH80gUzsWJvQzTM6C",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "testName",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PEDDREXYLCA5Hs9ZDezE1mVKVhrE5Kws8",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "input",
                    "name": "event_data",
                    "type": "datatype.string",
                    "description": "The event data coming in from the thousand eyes event trigger.",
                    "is_required": true,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PDDN1BZCJWF6KH5Q5W668EjwcLa2y7OTT",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "dateStart",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PED9QEXQLUJ1MFSaD99hZPxldnBD7JO58",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "ruleName",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PDDODYY9I673dw14mq5YluvEeBWXZr2S7",
                "object_type": "variable_workflow"
            },
            {
                "schema_id": "datatype.string",
                "properties": {
                    "value": "",
                    "scope": "output",
                    "name": "testType",
                    "type": "datatype.string",
                    "is_required": false,
                    "is_invisible": false
                },
                "unique_name": "variable_workflow_01PIJRG739TP90Lb949ZXLyA4vippxFI5mG",
                "object_type": "variable_workflow"
            }
        ],
        "properties": {
            "atomic": {
                "atomic_group": "Cisco Thousand Eyes",
                "is_atomic": true
            },
            "delete_workflow_instance": false,
            "description": "Parse a thousand eyes event payload",
            "display_name": "Thousand Eyes - Parse Event Data",
            "runtime_user": {
                "target_default": true
            },
            "target": {
                "no_target": true
            }
        },
        "object_type": "definition_workflow",
        "actions": [
            {
                "unique_name": "definition_activity_01PJ845RR5RSO4LGSG8A88dCGl2r5oBna70",
                "name": "Execute Python Script",
                "title": "Parse Optional Fields",
                "type": "python3.script",
                "base_type": "activity",
                "properties": {
                    "action_timeout": 180,
                    "continue_on_failure": false,
                    "description": "TODO: Convert to SXO for loop???",
                    "display_name": "Parse Optional Fields",
                    "script": "import sys, json\nevent_string = json.loads(sys.argv[1])['alert']\ntestLabels = json.dumps(event_string.get('testLabels', ''))\ntestTargetsDescription = json.dumps(event_string.get('testTargetsDescription', ''))",
                    "script_arguments": [
                        "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.input.variable_workflow_01PDDN1BZCJWF6KH5Q5W668EjwcLa2y7OTT$"
                    ],
                    "script_queries": [
                        {
                            "script_query": "testLabels",
                            "script_query_name": "testLabels",
                            "script_query_type": "string"
                        },
                        {
                            "script_query": "testTargetsDescription",
                            "script_query_name": "testTargetsDescription",
                            "script_query_type": "string"
                        }
                    ],
                    "skip_execution": false
                },
                "object_type": "definition_activity"
            },
            {
                "unique_name": "definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV",
                "name": "JSONPath Query",
                "title": "Parse Data From Thousand Eyes Alert",
                "type": "corejava.jsonpathquery",
                "base_type": "activity",
                "properties": {
                    "action_timeout": 180,
                    "continue_on_failure": true,
                    "display_name": "Parse Data From Thousand Eyes Alert",
                    "input_json": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.input.variable_workflow_01PDDN1BZCJWF6KH5Q5W668EjwcLa2y7OTT$",
                    "jsonpath_queries": [
                        {
                            "jsonpath_query": "$.alert.alertId",
                            "jsonpath_query_name": "alertId",
                            "jsonpath_query_type": "string"
                        },
                        {
                            "jsonpath_query": "$.alert.testId",
                            "jsonpath_query_name": "testId",
                            "jsonpath_query_type": "string"
                        },
                        {
                            "jsonpath_query": "$.alert.agents",
                            "jsonpath_query_name": "agentList",
                            "jsonpath_query_type": "string"
                        },
                        {
                            "jsonpath_query": "$.eventId",
                            "jsonpath_query_name": "eventId",
                            "jsonpath_query_type": "string"
                        },
                        {
                            "jsonpath_query": "$.eventType",
                            "jsonpath_query_name": "eventType",
                            "jsonpath_query_type": "string"
                        },
                        {
                            "jsonpath_query": "$.alert.permalink",
                            "jsonpath_query_name": "permalink",
                            "jsonpath_query_type": "string"
                        },
                        {
                            "jsonpath_query": "$.alert.ruleExpression",
                            "jsonpath_query_name": "ruleExpression",
                            "jsonpath_query_type": "string"
                        },
                        {
                            "jsonpath_query": "$.alert.ruleId",
                            "jsonpath_query_name": "ruleId",
                            "jsonpath_query_type": "string"
                        },
                        {
                            "jsonpath_query": "$.alert.ruleName",
                            "jsonpath_query_name": "ruleName",
                            "jsonpath_query_type": "string"
                        },
                        {
                            "jsonpath_query": "$.alert.dateStart",
                            "jsonpath_query_name": "dateStart",
                            "jsonpath_query_type": "string"
                        },
                        {
                            "jsonpath_query": "$.alert.testName",
                            "jsonpath_query_name": "testName",
                            "jsonpath_query_type": "string"
                        },
                        {
                            "jsonpath_query": "$.alert.agents[0].metricsAtStart",
                            "jsonpath_query_name": "firstMetricsAtStart",
                            "jsonpath_query_type": "string"
                        },
                        {
                            "jsonpath_query": "$.alert.agents[0].agentId",
                            "jsonpath_query_name": "firstAgentId",
                            "jsonpath_query_type": "string"
                        },
                        {
                            "jsonpath_query": "$.alert.agents[*].agentId",
                            "jsonpath_query_name": "agentIdsList",
                            "jsonpath_query_type": "string"
                        },
                        {
                            "jsonpath_query": "$.alert.agents[0].agentName",
                            "jsonpath_query_name": "firstAgentName",
                            "jsonpath_query_type": "string"
                        },
                        {
                            "jsonpath_query": "$.alert.type",
                            "jsonpath_query_name": "testType",
                            "jsonpath_query_type": "string"
                        }
                    ],
                    "skip_execution": false
                },
                "object_type": "definition_activity"
            },
            {
                "unique_name": "definition_activity_01PE841PB6SAQ6iZAresBq2HvK2ofskJjxf",
                "name": "Condition Block",
                "title": "Parsing Successful?",
                "type": "logic.if_else",
                "base_type": "activity",
                "properties": {
                    "continue_on_failure": false,
                    "display_name": "Parsing Successful?",
                    "skip_execution": true
                },
                "object_type": "definition_activity",
                "blocks": [
                    {
                        "unique_name": "definition_activity_01PE841VMU1I33VXtmu3HsRlF2Uy7NJSvgX",
                        "name": "Condition Branch",
                        "title": "Step Failed?",
                        "type": "logic.condition_block",
                        "base_type": "activity",
                        "properties": {
                            "condition": {
                                "left_operand": "$activity.definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV.output.succeeded$",
                                "operator": "eq",
                                "right_operand": false
                            },
                            "continue_on_failure": false,
                            "display_name": "Step Failed?",
                            "skip_execution": false
                        },
                        "object_type": "definition_activity",
                        "actions": [
                            {
                                "unique_name": "definition_activity_01PE84LALFOP415BotMyVcFe1IPAoOy0CA3",
                                "name": "Completed",
                                "title": "Completed",
                                "type": "logic.completed",
                                "base_type": "activity",
                                "properties": {
                                    "completion_type": "failed-completed",
                                    "continue_on_failure": false,
                                    "display_name": "Completed",
                                    "result_message": "Failed to parse data: $activity.definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV.output.error.message$",
                                    "skip_execution": false
                                },
                                "object_type": "definition_activity"
                            }
                        ]
                    }
                ]
            },
            {
                "unique_name": "definition_activity_01PE83VE3OUUR5vRlUFZvmIcglCwJjpDo1x",
                "name": "Set Variables",
                "title": "Set Output Variables",
                "type": "core.set_multiple_variables",
                "base_type": "activity",
                "properties": {
                    "continue_on_failure": false,
                    "display_name": "Set Output Variables",
                    "skip_execution": false,
                    "variables_to_update": [
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.output.variable_workflow_01PDDNHYX9YKF1uXbBCGeoSdYs3KdYbBDxL$",
                            "variable_value_new": "$activity.definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV.output.jsonpath_queries.agentList$"
                        },
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.output.variable_workflow_01PDDNCPD0SR74yI38VFFeYuS0GTg88lsmo$",
                            "variable_value_new": "$activity.definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV.output.jsonpath_queries.alertId$"
                        },
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.output.variable_workflow_01PDDR8CWL6JB1GPCiFT27OtfRQhK1MoxEg$",
                            "variable_value_new": "$activity.definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV.output.jsonpath_queries.eventId$"
                        },
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.output.variable_workflow_01PDDNQRY8KFJ5OD9gDT2qit6O7nNgsDvf8$",
                            "variable_value_new": "$activity.definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV.output.jsonpath_queries.eventType$"
                        },
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.output.variable_workflow_01PDDNZMZEWB85Izw2pH80gUzsWJvQzTM6C$",
                            "variable_value_new": "$activity.definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV.output.jsonpath_queries.permalink$"
                        },
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.output.variable_workflow_01PDDO2JHAKXC24j4G90qt9y3AnMz4bLPu8$",
                            "variable_value_new": "$activity.definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV.output.jsonpath_queries.ruleExpression$"
                        },
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.output.variable_workflow_01PDDO9XIU8W669LA3U5C8tgTlQDwkUYv7W$",
                            "variable_value_new": "$activity.definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV.output.jsonpath_queries.ruleId$"
                        },
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.output.variable_workflow_01PDDODYY9I673dw14mq5YluvEeBWXZr2S7$",
                            "variable_value_new": "$activity.definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV.output.jsonpath_queries.ruleName$"
                        },
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.output.variable_workflow_01PDDNF531YNW4sk52BLwj3Af48CUnOWEcd$",
                            "variable_value_new": "$activity.definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV.output.jsonpath_queries.testId$"
                        },
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.output.variable_workflow_01PDDQVQJJDJQ3Hjs3ID5KWGWbiuzd2kNn7$",
                            "variable_value_new": "$activity.definition_activity_01PJ845RR5RSO4LGSG8A88dCGl2r5oBna70.output.script_queries.testLabels$"
                        },
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.output.variable_workflow_01PED9QEXQLUJ1MFSaD99hZPxldnBD7JO58$",
                            "variable_value_new": "$activity.definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV.output.jsonpath_queries.dateStart$"
                        },
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.output.variable_workflow_01PEDDREXYLCA5Hs9ZDezE1mVKVhrE5Kws8$",
                            "variable_value_new": "$activity.definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV.output.jsonpath_queries.testName$"
                        },
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.output.variable_workflow_01PEDJ4ZGG1QB31cHmTTmWaZvP6rCQNxJTS$",
                            "variable_value_new": "$activity.definition_activity_01PJ845RR5RSO4LGSG8A88dCGl2r5oBna70.output.script_queries.testTargetsDescription$"
                        },
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.output.variable_workflow_01PES34PQMFBY4r8XZ8UmCQqqmP0P3tKtE7$",
                            "variable_value_new": "$activity.definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV.output.jsonpath_queries.firstAgentId$"
                        },
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.output.variable_workflow_01PES2TGCH8GF1CWganVed9YkJPwsSMKNob$",
                            "variable_value_new": "$activity.definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV.output.jsonpath_queries.firstMetricsAtStart$"
                        },
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.output.variable_workflow_01PIBCW3BOO7128k1jPPpf8XCAU3sLtznvJ$",
                            "variable_value_new": "$activity.definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV.output.jsonpath_queries.firstAgentName$"
                        },
                        {
                            "variable_to_update": "$workflow.definition_workflow_01PDDM76BX8722kfyMLGCoefagM8hBq2dh4.output.variable_workflow_01PIJRG739TP90Lb949ZXLyA4vippxFI5mG$",
                            "variable_value_new": "$activity.definition_activity_01PDDMF23QNP23ABn3QXs7A4dLfKnysR9JV.output.jsonpath_queries.testType$"
                        }
                    ]
                },
                "object_type": "definition_activity"
            }
        ],
        "categories": [
            "category_01P8H47BOO9FS4gqbKCHuYDfprrOuSH0jBQ"
        ]
    },
    "categories": {
        "category_01P8H47BOO9FS4gqbKCHuYDfprrOuSH0jBQ": {
            "unique_name": "category_01P8H47BOO9FS4gqbKCHuYDfprrOuSH0jBQ",
            "name": "Thousand Eyes",
            "title": "Thousand Eyes",
            "type": "basic.category",
            "base_type": "category",
            "description": "Actions relating to Thousand Eyes",
            "category_type": "custom",
            "object_type": "category"
        }
    }
}